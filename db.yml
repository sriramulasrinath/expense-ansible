- name: configure DB server 
  hosts: db 
  become: yes
  vars:
    login_host: "172.31.29.22" 
  tasks:
  - name: install mysql 
    ansible.builtin.dnf:
      name: mysql-server 
      state: latest 

  - name:  start and enable MySQL server 
    ansible.builtin.service:
      name: mysqld
      state: started
      enabled: yes

  - name: install python mysql dependencies
    ansible.builtin.pip:
      name:
      - pyMySQL
      - cryptography
    executable: pip3.9

  - name: check DB connection
    community.mysql.mysql_info:
      login_user: root 
      login_password: Srinath@1
      login_host: {{login_host}}
      filter: version # for checking purpose installed or not 
    ignore errors: yes 
    register: mysql_connection_output 

  - name: print output 
    ansible.builtin.debug:
      msg: "Output {{mysql_connection_output}}"

